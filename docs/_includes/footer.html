<footer>
		<div class="wrap row">
			<div class="col-md-8 foo-info">
				<div>
				<h2>Nuestra web</h2>
				<ul>
					<li><a href="{{ site.baseurl }}">Inicio</a></li>
					<li><a href="{{ site.baseurl }}/nosotros">Nosotros</a></li>
					<li><a href="{{ site.baseurl }}/calendario">Calendario</a></li>
					<li><a href="{{ site.baseurl }}/blog">Blog</a></li>
					<li><a href="{{ site.baseurl }}/contacto">Contacto</a></li>
				</ul>
				</div>
				<div>
				<h2>Síguenos</h2>
				<ul>
					<li><a href="https://www.facebook.com/GUIAUSB18/">Facebook</a></li>
					<li><a href="https://www.instagram.com/guia_usb/">Instagram</a></li>
					<li><a href="https://twitter.com/guia_usb">Twitter</a></li>
				</ul>
				</div>
				<p class="credits">
					Diseño y desarrollo por <a href="https://github.com/josedan10">José Quintero</a> y <a href="http://lual.com.ve">Lual</a><br>
					Alojado orgullosamente por <a href="https://github.com/lualparedes/guia-web">GitHub</a>
				</p>
			</div>
			<div class="col-md-4 foo-logo">
				<div class="logo-foo">
					<svg
						 class="logo"
						 viewBox="0 0 333.00688 231.40916"
						 height="65.308807mm"
						 width="93.981941mm">
						<g
							 transform="translate(455.07544,-890.94361)"
							 id="layer1">
							<path
								 id="path5590"
								 d="m -139.17969,890.95117 c -20.18031,0.35295 -56.45633,13.8688 -99.53906,36.80469 l 1.72852,2.58398 c 47.2191,-24.93043 82.92054,-36.12896 89.65234,-26.06836 6.7319,10.06061 -17.23918,38.78936 -58.29688,72.92774 l 9.01758,13.48047 c 51.7959,-42.77738 82.17572,-80.45183 72.88672,-94.33399 -2.3223,-3.47056 -6.96377,-5.21664 -13.54687,-5.38867 -0.61717,-0.0161 -1.25137,-0.0172 -1.90235,-0.006 z m -33.04492,18.22656 c -12.0903,-0.26156 -35.14726,8.06495 -63.78906,22.62305 l 2.36133,3.52539 c 27.7264,-14.02046 47.32131,-20.21398 50.91211,-14.84765 3.5908,5.36633 -9.60949,21.1189 -33.14649,41.40039 l 6.49414,9.70507 c 32.5063,-27.90331 50.9792,-50.8638 45.4043,-59.19531 -1.3938,-2.08286 -4.20623,-3.12375 -8.23633,-3.21094 z m -160.69141,58.40235 c -2.8921,9e-5 -5.61896,0.84711 -8.16406,2.51367 -2.5259,1.63698 -4.70931,3.94385 -6.54101,6.91992 -1.8895,3.03568 -3.3632,6.62108 -4.4043,10.75781 -1.0219,4.10707 -1.51367,8.55765 -1.51367,13.37892 0,4.9999 0.54129,9.5228 1.62109,13.5703 1.0797,4.0476 2.51986,7.4969 4.35156,10.3242 1.8124,2.7976 3.94941,4.9432 6.37891,6.461 2.4294,1.5178 4.94616,2.2968 7.56836,2.2968 2.4487,0 4.94123,-0.4812 7.48633,-1.4336 2.5451,-0.9524 5.11323,-2.3217 7.67773,-4.1074 -0.039,-0.8035 -0.0985,-1.832 -0.13672,-3.082 -0.019,-1.25 -0.0254,-3.6728 -0.0254,-7.2442 l 0,-10.08 c 0,-1.1011 0.11811,-2.0617 0.34961,-2.8653 0.2506,-0.8333 0.66574,-1.4734 1.24414,-1.9199 0.482,-0.3571 1.12118,-0.6318 1.89258,-0.8105 0.7905,-0.2082 1.40234,-0.3443 1.86524,-0.4336 l 0,-3.26956 -17.97461,0 0,3.26956 c 0.617,0.06 1.46121,0.1956 2.54101,0.4336 1.099,0.2084 1.95745,0.5262 2.59375,0.9726 0.694,0.4465 1.13936,1.18 1.35156,2.1621 0.2312,0.9524 0.35157,2.049 0.35157,3.2989 l 0,8.6757 c 0,1.1012 -0.0104,2.4227 -0.0274,4 0,1.5774 -0.0625,3.1557 -0.21679,4.7032 -0.5784,0.8929 -1.5925,1.7374 -3,2.541 -1.3883,0.8036 -2.9244,1.2168 -4.6211,1.2168 -2.2752,0 -4.31627,-0.7809 -6.10937,-2.2989 -1.7932,-1.5176 -3.26369,-3.5933 -4.45899,-6.2421 -1.1955,-2.5892 -2.12161,-5.6498 -2.75781,-9.1914 -0.6171,-3.5713 -0.91807,-7.3611 -0.91797,-11.3789 -1e-4,-4.55349 0.30901,-8.68844 0.94531,-12.37896 0.6362,-3.69034 1.55417,-6.77388 2.73047,-9.24414 1.1953,-2.55935 2.5972,-4.47805 4.2168,-5.75781 1.6196,-1.30943 3.45057,-1.94522 5.51367,-1.94531 1.8895,9e-5 3.51554,0.54487 4.86524,1.67578 1.3689,1.10124 2.51418,2.58414 3.45898,4.45898 0.9447,1.87501 1.72642,4.02543 2.32422,6.40625 0.5976,2.35116 1.10867,4.74904 1.51367,7.18946 l 2.35156,0 -0.24218,-22.16407 -2.32422,0 -1.18946,3.05469 c -1.3112,-1.22008 -2.82511,-2.27155 -4.54101,-3.13476 -1.7162,-0.86294 -3.71365,-1.29874 -6.02735,-1.29883 z m 107.00782,0.48633 c -1.9474,7.73807 -4.16114,16.57978 -6.64844,26.49023 -2.4873,9.91066 -4.77489,18.83896 -6.83789,26.78516 -0.4049,1.5477 -0.81994,2.7556 -1.24414,3.6484 -0.4241,0.8632 -1.01189,1.7102 -1.78321,2.5137 -0.48199,0.4762 -1.11333,0.8666 -1.86523,1.1641 -0.7519,0.2679 -1.36393,0.4268 -1.86523,0.4863 l 0,3.1621 15.43359,0 0,-3.1621 c -1.5232,-0.119 -2.89477,-0.5073 -4.10937,-1.1621 -1.2148,-0.6547 -1.81055,-1.5947 -1.81055,-2.7852 0,-0.5059 0.0386,-1.1417 0.13476,-1.9453 0.096,-0.8036 0.26298,-1.857 0.51368,-3.1367 0.2699,-1.3095 0.56477,-2.7218 0.89257,-4.2695 0.347,-1.5475 0.81167,-3.3776 1.35157,-5.461 l 14.35156,0 3.43359,14.1914 c 0.077,0.2977 0.12351,0.6405 0.16211,1.0274 0.039,0.3868 0.0547,0.7322 0.0547,1 -10e-5,0.6548 -0.48373,1.202 -1.48633,1.6484 -0.9834,0.4464 -2.22647,0.7439 -3.73047,0.8926 l 0,3.1621 17.08203,0 0,-3.1621 c -0.482,-0.029 -1.0698,-0.193 -1.7832,-0.4609 -0.7134,-0.2976 -1.31451,-0.6361 -1.75781,-1.0528 -0.6557,-0.6844 -1.14737,-1.3948 -1.51367,-2.1094 -0.3664,-0.7139 -0.7109,-1.6498 -1,-2.8105 l -13.67579,-54.65429 -2.29882,0 z m -84.84375,0.89257 0,3.18946 c 0.482,0.0597 1.11323,0.21854 1.86523,0.48633 0.7519,0.23812 1.35589,0.55804 1.83789,0.97461 0.6748,0.59523 1.11212,1.25847 1.32422,1.97265 0.2314,0.6846 0.35146,1.55219 0.35156,2.59375 l 0,37.43552 c -1e-4,2.3809 0.3444,4.6903 1,6.8926 0.6555,2.1727 1.62617,4.0889 2.91797,5.7852 1.3111,1.6964 2.90969,3.0452 4.83789,4.0273 1.9281,1.0119 4.12771,1.5137 6.59571,1.5137 1.5424,0 3.16039,-0.3404 4.83789,-1.0547 1.6967,-0.6845 3.31654,-1.8518 4.83984,-3.459 1.5424,-1.6665 2.78362,-3.7896 3.72852,-6.3789 0.9447,-2.5892 1.40615,-5.6248 1.40625,-9.1367 l 0,-27.54299 c -10e-5,-3.09509 0.1282,-5.72235 0.3789,-7.86523 0.2506,-2.14271 0.72136,-3.55954 1.37696,-4.24414 0.6555,-0.65467 1.49981,-1.15887 2.54101,-1.48633 1.0412,-0.3273 1.81156,-0.48383 2.35156,-0.51367 l 0,-3.18946 -16.75781,0 0,3.18946 c 0.6169,0.0597 1.49154,0.28657 2.64844,0.70312 1.1761,0.41673 2.11025,0.98654 2.78515,1.73047 0.5977,0.65476 1.04307,2.04907 1.35157,4.16211 0.3084,2.08337 0.45888,4.77858 0.45898,8.08203 l 0,25.97463 c -10e-5,1.7856 -0.15863,3.5684 -0.48633,5.3242 -0.3278,1.756 -0.88538,3.4203 -1.67578,5.0273 -0.8292,1.6964 -1.96025,3.0678 -3.40625,4.1094 -1.4269,1.0417 -3.20332,1.5684 -5.32422,1.5684 -2.256,0 -4.03242,-0.5267 -5.32422,-1.5684 -1.2918,-1.0416 -2.30268,-2.3631 -3.05468,-4 -0.7134,-1.6071 -1.21024,-3.3441 -1.46094,-5.1894 -0.2314,-1.8749 -0.34971,-3.657 -0.34961,-5.3535 l 0,-35.002 c -10e-5,-0.98205 0.11212,-1.89701 0.32422,-2.73047 0.2313,-0.83319 0.66872,-1.42599 1.32422,-1.78321 0.3856,-0.20816 1.00074,-0.41023 1.81054,-0.64843 0.8291,-0.23795 1.51489,-0.37641 2.05469,-0.40625 l 0,-3.18946 -17.10937,0 z m 44.92187,0 0,3.18946 c 0.5592,0.0597 1.26707,0.24107 2.13477,0.56836 0.8869,0.29772 1.61105,0.6156 2.18945,0.97265 0.7906,0.47632 1.30157,1.09638 1.51367,1.81055 0.2121,0.6846 0.32422,1.52681 0.32422,2.56836 l 0,45.89644 c 0,1.1905 -0.14244,2.1261 -0.43164,2.8106 -0.2893,0.6548 -0.76995,1.1795 -1.40625,1.5664 -0.4048,0.2381 -1.09678,0.4219 -2.08008,0.541 -0.9833,0.1191 -1.72354,0.212 -2.24414,0.2715 l 0,3.1621 18.48828,0 0,-3.1621 c -0.6364,-0.029 -1.42606,-0.193 -2.35156,-0.4609 -0.9063,-0.2976 -1.56776,-0.5451 -1.97266,-0.7832 -0.6748,-0.4464 -1.14449,-1.0666 -1.43359,-1.8106 -0.2701,-0.7738 -0.4043,-1.6409 -0.4043,-2.623 l 0,-45.84183 c 0,-0.98205 0.12636,-1.87218 0.37696,-2.67579 0.2507,-0.80353 0.72823,-1.39862 1.46093,-1.75586 0.617,-0.29754 1.36036,-0.52442 2.18946,-0.70312 0.8291,-0.20819 1.53696,-0.32172 2.13476,-0.35156 l 0,-3.18946 -18.48828,0 z m 39.19336,12.91993 6.2168,24.54299 -12.32617,0 6.10937,-24.54299 z m -152.31055,39.44919 c -52.7504,43.3005 -83.84879,81.5981 -74.46679,95.6192 9.3819,14.0212 56.65754,-0.1008 116.81054,-32.3379 l -9.01953,-13.4785 c -48.1197,25.6048 -84.63903,37.2069 -91.45703,27.0175 -6.8181,-10.1895 17.83663,-39.5226 59.86133,-74.2363 l -1.72852,-2.584 z m 2.68946,4.0215 c -33.4727,28.4935 -52.6298,52.0408 -46.9668,60.5039 5.6629,8.4632 34.74748,-0.2487 73.85938,-20.3144 l -6.49415,-9.7051 c -28.68279,14.6695 -49.06567,21.256 -52.73437,15.7734 -3.6685,-5.4826 10.19361,-21.8123 34.69531,-42.7304 l -2.35937,-3.5274 z"
								 style="opacity:1;fill:#0b1728;fill-opacity:1;stroke:none" />
						</g>
					</svg>
				</div>
			</div>
		</div>
	</footer>

</div>

	
<!-- Scripts -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
{% if page.id == 'blog' %}
<script src="{{ site.baseurl }}/js/hammer.js"></script>
{% endif %}
<script src="{{ site.baseurl }}/js/scripts.js"></script>
{% if page.id == 'blog' %}
<script>

	// variables
	var thumb = '';
	var appendStyles = '';

	// create style rules for each post card
	{% for post in site.posts %}
		thumb = "{{ site.baseurl }}/img/posts/"+"{{ post.date | date: '%Y-%m-%d-' }}"+"{{ post.slug }}"+"-hero.png";
		appendStyles += '.' + '{{ post.slug }}' + ' .card-img { background: url(' + thumb + ') center; background-size: cover; }'
		{% if forloop.index < 4 %}
			appendStyles += '.' + '{{ post.slug }}' + '.hero { background: url(' + thumb + ') center; background-size: cover; }'
		{% endif %}
	{% endfor %}

	// insert required styles
	$('head style').append(appendStyles);

	var token = '3291338706.76a576a.34341da1188846bfb04a04a729038d9b';
	var userId = '3291338706';
	var numOfPosts = 6;

	$.ajax({
		url: 'https://api.instagram.com/v1/users/self/media/recent',
		type: "GET",
	    dataType: "jsonp",
	    data: {
	    	access_token: token,
	    	count: numOfPosts
	    }
	}).done(function(data){

		console.log(data);

		var img = data.data[0].images.standard_resolution.url;
		var	url = data.data[0].link;

		for (var i = 0; i <= 5; i++) {
			img = data.data[i].images.standard_resolution.url;
			url = data.data[i].link;
			$('.insta li:nth-child(' + (i+1) + ') img').attr('src',img);
			$('.insta li:nth-child(' + (i+1) + ') a').attr('href',url);
		}

	});

</script>
{% endif %}
{% if page.id == 'contacto' %}
<script>
	
	/*==== Live validation ====*/

	/*---- Globals ----*/

	var validation = [0,0,0]; // array of booleans, each item corresponds to a field in the form


	/*---- Functions ----*/

	function fieldFeedback(valid,field) {

		// variables
		var fieldEl = '#' + field;
		var fieldMsgEl = '#' + field + '-msg';
		var errMsg;
		if (field == 'name') { // set proper error message
			errMsg = '¿Cómo te llamas?';
		} else if (field == 'email') {
			errMsg = 'Introduce una dirección de correo válida';
		} else {
			errMsg = 'Escribe tu mensaje';
		}
		
		if (valid) { // feedback for ok

			// border botton turns green
			$(fieldEl).css('border-bottom','2px solid #2e9e46');
			// message is hidden (if there was any)
			if ($(fieldMsgEl).length) {
				$(fieldMsgEl).slideUp();
			}
			
		} else { // feedback for err

			$(fieldEl).css('border-bottom','2px solid #ca4848');
			// message is displayed below (slide down)
			if ($(fieldMsgEl).length < 1) {
				$(fieldEl).after('<span class="no-trans" id="' + field + '-msg">' + errMsg +'</span>');
				$(fieldMsgEl).slideDown();
			} else {
				$(fieldMsgEl).slideDown();
			}

		}

	}

	function fieldValidation(field) {

		var str = $('#' + field).val();
		var i = (field == 'name' ? 0 : field == 'email' ? 1 : 2);
		var regex = /[A-Z0-9._%+-]+@[A-Z0-9.-]+[.]+[A-Z]{2,4}/igm; // for email val
		
		if ((str == '') || ( i == 1 && !regex.test(str) )) {
			fieldFeedback(false,field);
			validation[i] = 0;
		} else {
			fieldFeedback(true,field);
			validation[i] = 1;
		}

	}


	/*---- Events ----*/

	// on focus out
	$('.contact-form .in').focusout(function(){
		fieldValidation($(this).attr('id'));
	});



	/*==== Ajax request ====*/

	// on submit
	$('#contact-form').submit(function(event){

		event.preventDefault();

		if (validation.reduce( (prev, curr) => prev + curr ) == 3) { // all three values are valid

			console.log('ha');
			// send data
			$.ajax({
			    url: "https://formspree.io/guia@usb.ve", 
			    method: "POST",
			    data: {
			    	Nombre: $('#name').val(),
			    	Correo: $('#email').val(),
			    	Mensaje: $('#msg').val()
			    },
			    dataType: "json"
			}).done(function(){
				$('.msg').html('Mensaje enviado <span class="icon-">&#59650;</span>' +
						'<span class=\"close\"><span class=\"no-trans\">x</span></span>');
				$('.msg').removeClass('err').addClass('ok');
				$('.msg').slideDown('fast');
			}).fail(function(){
				$('.msg').html('No se pudo procesar tu mensaje, por favor intenta de nuevo' +
						'<span class=\"close\"><span class=\"no-trans\">x</span></span>');
				$('.msg').removeClass('ok').addClass('err');
				$('.msg').slideDown('fast');
			});
	
		} 
	});
</script>
{% endif %}
{% if page.comments %}
	<script>
	/**
	*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
	*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
	/*
	var disqus_config = function () {
	this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
	this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
	};
	*/
	(function() { // DON'T EDIT BELOW THIS LINE
	var d = document, s = d.createElement('script');
	s.src = '//guia-usb.disqus.com/embed.js';
	s.setAttribute('data-timestamp', +new Date());
	(d.head || d.body).appendChild(s);
	})();
	</script>
	<noscript>Por favor habilita JavaScript para <a href="https://disqus.com/?ref_noscript">comentar</a></noscript>
{% endif %}
{% if page.id == 'resultados' %}
	<script>
		window.store = {
			{% for post in site.posts %}
				"{{ post.url | slugify }}": {
					"title": "{{ post.title | xml_escape }}",
					"author": "{{ post.author | xml_escape }}",
					"category": "{{ post.category | xml_escape }}",
					"content": {{ post.content | strip_html | strip_newlines | jsonify }},
					"url": "{{ site.baseurl }}{{ post.url | xml_escape }}",
					"slug": "{{ post.slug }}",
					"thumb": "{{ site.baseurl }}/img/posts/"+"{{ post.date | date: '%Y-%m-%d-' }}"+"{{ post.slug }}"+"-hero.png"
				}
				{% unless forloop.last %},{% endunless %}
			{% endfor %}
		};
	</script>
	<script>
		/*
		This is lunarjs
		*/
			!function(){var t=function(e){var n=new t.Index;return n.pipeline.add(t.trimmer,t.stopWordFilter,t.stemmer),e&&e.call(n,n),n};t.version="0.7.2",t.utils={},t.utils.warn=function(t){return function(e){t.console&&console.warn&&console.warn(e)}}(this),t.utils.asString=function(t){return void 0===t||null===t?"":t.toString()},t.EventEmitter=function(){this.events={}},t.EventEmitter.prototype.addListener=function(){var t=Array.prototype.slice.call(arguments),e=t.pop(),n=t;if("function"!=typeof e)throw new TypeError("last argument must be a function");n.forEach(function(t){this.hasHandler(t)||(this.events[t]=[]),this.events[t].push(e)},this)},t.EventEmitter.prototype.removeListener=function(t,e){if(this.hasHandler(t)){var n=this.events[t].indexOf(e);this.events[t].splice(n,1),this.events[t].length||delete this.events[t]}},t.EventEmitter.prototype.emit=function(t){if(this.hasHandler(t)){var e=Array.prototype.slice.call(arguments,1);this.events[t].forEach(function(t){t.apply(void 0,e)})}},t.EventEmitter.prototype.hasHandler=function(t){return t in this.events},t.tokenizer=function(e){if(!arguments.length||null==e||void 0==e)return[];if(Array.isArray(e))return e.map(function(e){return t.utils.asString(e).toLowerCase()});var n=t.tokenizer.seperator||t.tokenizer.separator;return e.toString().trim().toLowerCase().split(n)},t.tokenizer.seperator=!1,t.tokenizer.separator=/[\s\-]+/,t.tokenizer.load=function(t){var e=this.registeredFunctions[t];if(!e)throw new Error("Cannot load un-registered function: "+t);return e},t.tokenizer.label="default",t.tokenizer.registeredFunctions={"default":t.tokenizer},t.tokenizer.registerFunction=function(e,n){n in this.registeredFunctions&&t.utils.warn("Overwriting existing tokenizer: "+n),e.label=n,this.registeredFunctions[n]=e},t.Pipeline=function(){this._stack=[]},t.Pipeline.registeredFunctions={},t.Pipeline.registerFunction=function(e,n){n in this.registeredFunctions&&t.utils.warn("Overwriting existing registered function: "+n),e.label=n,t.Pipeline.registeredFunctions[e.label]=e},t.Pipeline.warnIfFunctionNotRegistered=function(e){var n=e.label&&e.label in this.registeredFunctions;n||t.utils.warn("Function is not registered with pipeline. This may cause problems when serialising the index.\n",e)},t.Pipeline.load=function(e){var n=new t.Pipeline;return e.forEach(function(e){var i=t.Pipeline.registeredFunctions[e];if(!i)throw new Error("Cannot load un-registered function: "+e);n.add(i)}),n},t.Pipeline.prototype.add=function(){var e=Array.prototype.slice.call(arguments);e.forEach(function(e){t.Pipeline.warnIfFunctionNotRegistered(e),this._stack.push(e)},this)},t.Pipeline.prototype.after=function(e,n){t.Pipeline.warnIfFunctionNotRegistered(n);var i=this._stack.indexOf(e);if(-1==i)throw new Error("Cannot find existingFn");i+=1,this._stack.splice(i,0,n)},t.Pipeline.prototype.before=function(e,n){t.Pipeline.warnIfFunctionNotRegistered(n);var i=this._stack.indexOf(e);if(-1==i)throw new Error("Cannot find existingFn");this._stack.splice(i,0,n)},t.Pipeline.prototype.remove=function(t){var e=this._stack.indexOf(t);-1!=e&&this._stack.splice(e,1)},t.Pipeline.prototype.run=function(t){for(var e=[],n=t.length,i=this._stack.length,r=0;n>r;r++){for(var o=t[r],s=0;i>s&&(o=this._stack[s](o,r,t),void 0!==o&&""!==o);s++);void 0!==o&&""!==o&&e.push(o)}return e},t.Pipeline.prototype.reset=function(){this._stack=[]},t.Pipeline.prototype.toJSON=function(){return this._stack.map(function(e){return t.Pipeline.warnIfFunctionNotRegistered(e),e.label})},t.Vector=function(){this._magnitude=null,this.list=void 0,this.length=0},t.Vector.Node=function(t,e,n){this.idx=t,this.val=e,this.next=n},t.Vector.prototype.insert=function(e,n){this._magnitude=void 0;var i=this.list;if(!i)return this.list=new t.Vector.Node(e,n,i),this.length++;if(e<i.idx)return this.list=new t.Vector.Node(e,n,i),this.length++;for(var r=i,o=i.next;void 0!=o;){if(e<o.idx)return r.next=new t.Vector.Node(e,n,o),this.length++;r=o,o=o.next}return r.next=new t.Vector.Node(e,n,o),this.length++},t.Vector.prototype.magnitude=function(){if(this._magnitude)return this._magnitude;for(var t,e=this.list,n=0;e;)t=e.val,n+=t*t,e=e.next;return this._magnitude=Math.sqrt(n)},t.Vector.prototype.dot=function(t){for(var e=this.list,n=t.list,i=0;e&&n;)e.idx<n.idx?e=e.next:e.idx>n.idx?n=n.next:(i+=e.val*n.val,e=e.next,n=n.next);return i},t.Vector.prototype.similarity=function(t){return this.dot(t)/(this.magnitude()*t.magnitude())},t.SortedSet=function(){this.length=0,this.elements=[]},t.SortedSet.load=function(t){var e=new this;return e.elements=t,e.length=t.length,e},t.SortedSet.prototype.add=function(){var t,e;for(t=0;t<arguments.length;t++)e=arguments[t],~this.indexOf(e)||this.elements.splice(this.locationFor(e),0,e);this.length=this.elements.length},t.SortedSet.prototype.toArray=function(){return this.elements.slice()},t.SortedSet.prototype.map=function(t,e){return this.elements.map(t,e)},t.SortedSet.prototype.forEach=function(t,e){return this.elements.forEach(t,e)},t.SortedSet.prototype.indexOf=function(t){for(var e=0,n=this.elements.length,i=n-e,r=e+Math.floor(i/2),o=this.elements[r];i>1;){if(o===t)return r;t>o&&(e=r),o>t&&(n=r),i=n-e,r=e+Math.floor(i/2),o=this.elements[r]}return o===t?r:-1},t.SortedSet.prototype.locationFor=function(t){for(var e=0,n=this.elements.length,i=n-e,r=e+Math.floor(i/2),o=this.elements[r];i>1;)t>o&&(e=r),o>t&&(n=r),i=n-e,r=e+Math.floor(i/2),o=this.elements[r];return o>t?r:t>o?r+1:void 0},t.SortedSet.prototype.intersect=function(e){for(var n=new t.SortedSet,i=0,r=0,o=this.length,s=e.length,a=this.elements,h=e.elements;;){if(i>o-1||r>s-1)break;a[i]!==h[r]?a[i]<h[r]?i++:a[i]>h[r]&&r++:(n.add(a[i]),i++,r++)}return n},t.SortedSet.prototype.clone=function(){var e=new t.SortedSet;return e.elements=this.toArray(),e.length=e.elements.length,e},t.SortedSet.prototype.union=function(t){var e,n,i;this.length>=t.length?(e=this,n=t):(e=t,n=this),i=e.clone();for(var r=0,o=n.toArray();r<o.length;r++)i.add(o[r]);return i},t.SortedSet.prototype.toJSON=function(){return this.toArray()},t.Index=function(){this._fields=[],this._ref="id",this.pipeline=new t.Pipeline,this.documentStore=new t.Store,this.tokenStore=new t.TokenStore,this.corpusTokens=new t.SortedSet,this.eventEmitter=new t.EventEmitter,this.tokenizerFn=t.tokenizer,this._idfCache={},this.on("add","remove","update",function(){this._idfCache={}}.bind(this))},t.Index.prototype.on=function(){var t=Array.prototype.slice.call(arguments);return this.eventEmitter.addListener.apply(this.eventEmitter,t)},t.Index.prototype.off=function(t,e){return this.eventEmitter.removeListener(t,e)},t.Index.load=function(e){e.version!==t.version&&t.utils.warn("version mismatch: current "+t.version+" importing "+e.version);var n=new this;return n._fields=e.fields,n._ref=e.ref,n.tokenizer(t.tokenizer.load(e.tokenizer)),n.documentStore=t.Store.load(e.documentStore),n.tokenStore=t.TokenStore.load(e.tokenStore),n.corpusTokens=t.SortedSet.load(e.corpusTokens),n.pipeline=t.Pipeline.load(e.pipeline),n},t.Index.prototype.field=function(t,e){var e=e||{},n={name:t,boost:e.boost||1};return this._fields.push(n),this},t.Index.prototype.ref=function(t){return this._ref=t,this},t.Index.prototype.tokenizer=function(e){var n=e.label&&e.label in t.tokenizer.registeredFunctions;return n||t.utils.warn("Function is not a registered tokenizer. This may cause problems when serialising the index"),this.tokenizerFn=e,this},t.Index.prototype.add=function(e,n){var i={},r=new t.SortedSet,o=e[this._ref],n=void 0===n?!0:n;this._fields.forEach(function(t){var n=this.pipeline.run(this.tokenizerFn(e[t.name]));i[t.name]=n;for(var o=0;o<n.length;o++){var s=n[o];r.add(s),this.corpusTokens.add(s)}},this),this.documentStore.set(o,r);for(var s=0;s<r.length;s++){for(var a=r.elements[s],h=0,u=0;u<this._fields.length;u++){var l=this._fields[u],c=i[l.name],f=c.length;if(f){for(var d=0,p=0;f>p;p++)c[p]===a&&d++;h+=d/f*l.boost}}this.tokenStore.add(a,{ref:o,tf:h})}n&&this.eventEmitter.emit("add",e,this)},t.Index.prototype.remove=function(t,e){var n=t[this._ref],e=void 0===e?!0:e;if(this.documentStore.has(n)){var i=this.documentStore.get(n);this.documentStore.remove(n),i.forEach(function(t){this.tokenStore.remove(t,n)},this),e&&this.eventEmitter.emit("remove",t,this)}},t.Index.prototype.update=function(t,e){var e=void 0===e?!0:e;this.remove(t,!1),this.add(t,!1),e&&this.eventEmitter.emit("update",t,this)},t.Index.prototype.idf=function(t){var e="@"+t;if(Object.prototype.hasOwnProperty.call(this._idfCache,e))return this._idfCache[e];var n=this.tokenStore.count(t),i=1;return n>0&&(i=1+Math.log(this.documentStore.length/n)),this._idfCache[e]=i},t.Index.prototype.search=function(e){var n=this.pipeline.run(this.tokenizerFn(e)),i=new t.Vector,r=[],o=this._fields.reduce(function(t,e){return t+e.boost},0),s=n.some(function(t){return this.tokenStore.has(t)},this);if(!s)return[];n.forEach(function(e,n,s){var a=1/s.length*this._fields.length*o,h=this,u=this.tokenStore.expand(e).reduce(function(n,r){var o=h.corpusTokens.indexOf(r),s=h.idf(r),u=1,l=new t.SortedSet;if(r!==e){var c=Math.max(3,r.length-e.length);u=1/Math.log(c)}o>-1&&i.insert(o,a*s*u);for(var f=h.tokenStore.get(r),d=Object.keys(f),p=d.length,v=0;p>v;v++)l.add(f[d[v]].ref);return n.union(l)},new t.SortedSet);r.push(u)},this);var a=r.reduce(function(t,e){return t.intersect(e)});return a.map(function(t){return{ref:t,score:i.similarity(this.documentVector(t))}},this).sort(function(t,e){return e.score-t.score})},t.Index.prototype.documentVector=function(e){for(var n=this.documentStore.get(e),i=n.length,r=new t.Vector,o=0;i>o;o++){var s=n.elements[o],a=this.tokenStore.get(s)[e].tf,h=this.idf(s);r.insert(this.corpusTokens.indexOf(s),a*h)}return r},t.Index.prototype.toJSON=function(){return{version:t.version,fields:this._fields,ref:this._ref,tokenizer:this.tokenizerFn.label,documentStore:this.documentStore.toJSON(),tokenStore:this.tokenStore.toJSON(),corpusTokens:this.corpusTokens.toJSON(),pipeline:this.pipeline.toJSON()}},t.Index.prototype.use=function(t){var e=Array.prototype.slice.call(arguments,1);e.unshift(this),t.apply(this,e)},t.Store=function(){this.store={},this.length=0},t.Store.load=function(e){var n=new this;return n.length=e.length,n.store=Object.keys(e.store).reduce(function(n,i){return n[i]=t.SortedSet.load(e.store[i]),n},{}),n},t.Store.prototype.set=function(t,e){this.has(t)||this.length++,this.store[t]=e},t.Store.prototype.get=function(t){return this.store[t]},t.Store.prototype.has=function(t){return t in this.store},t.Store.prototype.remove=function(t){this.has(t)&&(delete this.store[t],this.length--)},t.Store.prototype.toJSON=function(){return{store:this.store,length:this.length}},t.stemmer=function(){var t={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},e={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},n="[^aeiou]",i="[aeiouy]",r=n+"[^aeiouy]*",o=i+"[aeiou]*",s="^("+r+")?"+o+r,a="^("+r+")?"+o+r+"("+o+")?$",h="^("+r+")?"+o+r+o+r,u="^("+r+")?"+i,l=new RegExp(s),c=new RegExp(h),f=new RegExp(a),d=new RegExp(u),p=/^(.+?)(ss|i)es$/,v=/^(.+?)([^s])s$/,g=/^(.+?)eed$/,m=/^(.+?)(ed|ing)$/,y=/.$/,S=/(at|bl|iz)$/,w=new RegExp("([^aeiouylsz])\\1$"),k=new RegExp("^"+r+i+"[^aeiouwxy]$"),x=/^(.+?[^aeiou])y$/,b=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,E=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,F=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,_=/^(.+?)(s|t)(ion)$/,z=/^(.+?)e$/,O=/ll$/,P=new RegExp("^"+r+i+"[^aeiouwxy]$"),T=function(n){var i,r,o,s,a,h,u;if(n.length<3)return n;if(o=n.substr(0,1),"y"==o&&(n=o.toUpperCase()+n.substr(1)),s=p,a=v,s.test(n)?n=n.replace(s,"$1$2"):a.test(n)&&(n=n.replace(a,"$1$2")),s=g,a=m,s.test(n)){var T=s.exec(n);s=l,s.test(T[1])&&(s=y,n=n.replace(s,""))}else if(a.test(n)){var T=a.exec(n);i=T[1],a=d,a.test(i)&&(n=i,a=S,h=w,u=k,a.test(n)?n+="e":h.test(n)?(s=y,n=n.replace(s,"")):u.test(n)&&(n+="e"))}if(s=x,s.test(n)){var T=s.exec(n);i=T[1],n=i+"i"}if(s=b,s.test(n)){var T=s.exec(n);i=T[1],r=T[2],s=l,s.test(i)&&(n=i+t[r])}if(s=E,s.test(n)){var T=s.exec(n);i=T[1],r=T[2],s=l,s.test(i)&&(n=i+e[r])}if(s=F,a=_,s.test(n)){var T=s.exec(n);i=T[1],s=c,s.test(i)&&(n=i)}else if(a.test(n)){var T=a.exec(n);i=T[1]+T[2],a=c,a.test(i)&&(n=i)}if(s=z,s.test(n)){var T=s.exec(n);i=T[1],s=c,a=f,h=P,(s.test(i)||a.test(i)&&!h.test(i))&&(n=i)}return s=O,a=c,s.test(n)&&a.test(n)&&(s=y,n=n.replace(s,"")),"y"==o&&(n=o.toLowerCase()+n.substr(1)),n};return T}(),t.Pipeline.registerFunction(t.stemmer,"stemmer"),t.generateStopWordFilter=function(t){var e=t.reduce(function(t,e){return t[e]=e,t},{});return function(t){return t&&e[t]!==t?t:void 0}},t.stopWordFilter=t.generateStopWordFilter(["a","able","about","across","after","all","almost","also","am","among","an","and","any","are","as","at","be","because","been","but","by","can","cannot","could","dear","did","do","does","either","else","ever","every","for","from","get","got","had","has","have","he","her","hers","him","his","how","however","i","if","in","into","is","it","its","just","least","let","like","likely","may","me","might","most","must","my","neither","no","nor","not","of","off","often","on","only","or","other","our","own","rather","said","say","says","she","should","since","so","some","than","that","the","their","them","then","there","these","they","this","tis","to","too","twas","us","wants","was","we","were","what","when","where","which","while","who","whom","why","will","with","would","yet","you","your"]),t.Pipeline.registerFunction(t.stopWordFilter,"stopWordFilter"),t.trimmer=function(t){return t.replace(/^\W+/,"").replace(/\W+$/,"")},t.Pipeline.registerFunction(t.trimmer,"trimmer"),t.TokenStore=function(){this.root={docs:{}},this.length=0},t.TokenStore.load=function(t){var e=new this;return e.root=t.root,e.length=t.length,e},t.TokenStore.prototype.add=function(t,e,n){var n=n||this.root,i=t.charAt(0),r=t.slice(1);return i in n||(n[i]={docs:{}}),0===r.length?(n[i].docs[e.ref]=e,void(this.length+=1)):this.add(r,e,n[i])},t.TokenStore.prototype.has=function(t){if(!t)return!1;for(var e=this.root,n=0;n<t.length;n++){if(!e[t.charAt(n)])return!1;e=e[t.charAt(n)]}return!0},t.TokenStore.prototype.getNode=function(t){if(!t)return{};for(var e=this.root,n=0;n<t.length;n++){if(!e[t.charAt(n)])return{};e=e[t.charAt(n)]}return e},t.TokenStore.prototype.get=function(t,e){return this.getNode(t,e).docs||{}},t.TokenStore.prototype.count=function(t,e){return Object.keys(this.get(t,e)).length},t.TokenStore.prototype.remove=function(t,e){if(t){for(var n=this.root,i=0;i<t.length;i++){if(!(t.charAt(i)in n))return;n=n[t.charAt(i)]}delete n.docs[e]}},t.TokenStore.prototype.expand=function(t,e){var n=this.getNode(t),i=n.docs||{},e=e||[];return Object.keys(i).length&&e.push(t),Object.keys(n).forEach(function(n){"docs"!==n&&e.concat(this.expand(t+n,e))},this),e},t.TokenStore.prototype.toJSON=function(){return{root:this.root,length:this.length}},function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e():t.lunr=e()}(this,function(){return t})}();
	</script>
	<script>
		/*
		Search script
		*/
		(function() {

			function getQueryVariable(variable) {
				var query = window.location.search.substring(1);
				var vars = query.split('&');

				for (var i = 0; i < vars.length; i++) {
					var pair = vars[i].split('=');

					if (pair[0] === variable) {
						return decodeURIComponent(pair[1].replace(/\+/g, '%20'));
					}
				}
			}

			var searchTerm = getQueryVariable('query');

			function displaySearchResults(results, store) {
				var searchResults = document.getElementById('search-results');

				if (results.length) { // Are there any results?
					var appendString = '';
					var appendStyles = '';

					for (var i = 0; i < results.length; i++) {  // Iterate over the results
						var item = store[results[i].ref];
						
						appendString += '<div class=\"card-result ' + item.slug +'\">' + // each card has a class with the post slug
										'<div class=\"card card-news\">' +
											'<div class=\"card-info\">' +
												'<a href=\"' + item.url + '\"><h2 class=\"no-trans\">' +
													'<span class=\"no-trans\">' + item.title + '</span>' +
												'</h2></a>' +
												'<a href=\"' + item.url + '\" class=\"read-more\">Leer más...</a>' +
											'</div>' +
											'<div class="card-img"></div>' +
										'</div>' +
										'</div>';

						// each card-img is modified according to the post (using the class just assigned)
						appendStyles += '.' + item.slug + ' .card-img { background: url(' + item.thumb + ') center; background-size: cover; }'
					}

					$('head style').append(appendStyles);
					$('.jumbotron h1 span').html('Resultados de <br>"'+searchTerm+'"');
					searchResults.innerHTML = appendString;

				} else {
					$('.jumbotron h1 span').html('Resultados de <br>"'+searchTerm+'"');
					searchResults.innerHTML = '<div class="msg">No se encontraron resultados.</div>';
				}
			}

			// perform search if there's a query
			if (searchTerm) {
				document.getElementById('search-box').setAttribute("value", searchTerm);

				// Initalize lunr with the fields it will be searching on. I've given title
				// a boost of 10 to indicate matches on this field are more important.
				var idx = lunr(function () {
					this.field('id');
					this.field('title', { boost: 10 });
					this.field('author');
					this.field('category');
					this.field('content');
				});

				for (var key in window.store) { // Add the data to lunr
					idx.add({
						'id': key,
						'title': window.store[key].title,
						'author': window.store[key].author,
						'category': window.store[key].category,
						'content': window.store[key].content
					});

					var results = idx.search(searchTerm); // Get lunr to perform a search
					displaySearchResults(results, window.store); // We'll write this in the next section
				}
			} else { // otherwise just print that the user must place a query
				$('.jumbotron h1 span').html('Resultados de <br>"'+searchTerm+'"');
				$('#search-results').html('<div class="msg err">Ingresa qué deseas buscar.</div>');
			}	

		})();
	</script>
{% endif%}

</body>

